{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Head from 'next/head';\nimport { useState, useEffect, useRef } from 'react';\nimport { VideoContainer, Video as VideoTag } from '../src/style';\nimport { joinStream } from '../src/controller';\nimport styled from 'styled-components';\n\nconst Video = props => {\n  const ref = useRef();\n  useEffect(() => {\n    props.peer.on(\"stream\", stream => {\n      console.log('VIDEO stream:', stream);\n      ref.current.srcObject = stream;\n    });\n  }, []);\n  return __jsx(VideoTag, {\n    muted: true,\n    controls: true,\n    autoPlay: true,\n    ref: ref\n  });\n};\n\nexport default function Home() {\n  const {\n    0: peers,\n    1: setPeers\n  } = useState([]);\n  console.log('peers:', peers);\n  const {\n    0: id,\n    1: setId\n  } = useState('ID');\n  const {\n    0: myStream,\n    1: setMyStream\n  } = useState(null);\n  const socketRef = useRef();\n  const peersRef = useRef([]);\n  useEffect(() => joinStream({\n    setId,\n    peers,\n    setMyStream,\n    peersRef,\n    setPeers,\n    socketRef\n  }), []);\n  useEffect(() => {\n    if (myStream) {\n      const video = document.getElementById(myStream.id);\n      video.srcObject = myStream;\n    }\n  }, [myStream]);\n  return __jsx(\"div\", {\n    className: \"jsx-1090809074\" + \" \" + \"container\"\n  }, __jsx(Head, null, __jsx(\"title\", {\n    className: \"jsx-1090809074\"\n  }, \"Create Next App\"), __jsx(\"link\", {\n    rel: \"icon\",\n    href: \"/favicon.ico\",\n    className: \"jsx-1090809074\"\n  })), __jsx(\"main\", {\n    className: \"jsx-1090809074\"\n  }, __jsx(\"h1\", {\n    className: \"jsx-1090809074\"\n  }, id), __jsx(VideoContainer, {\n    id: \"video-container\"\n  }, myStream ? __jsx(VideoTag, {\n    autoPlay: true,\n    muted: true,\n    controls: true,\n    id: myStream.id,\n    srcObject: myStream\n  }) : null, peers.map((peer, index) => {\n    return __jsx(Video, {\n      key: index,\n      peer: peer\n    });\n  }))), __jsx(_JSXStyle, {\n    id: \"1090809074\"\n  }, \"html,body{padding:0;margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto, Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue, sans-serif;}*{box-sizing:border-box;}\"));\n}","map":null,"metadata":{},"sourceType":"module"}